
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Document:      DM  Doc Tree  
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}

\usepackage{times,layouts}
\usepackage{tikz,hyperref,amsmath}
\usetikzlibrary{positioning,arrows,shapes,decorations.shapes,shapes.arrows}
\usetikzlibrary{backgrounds,calc}

\usepackage[paperwidth=32cm,paperheight=20cm,
left=-2mm,top=3mm,bottom=0mm,right=0mm,
noheadfoot,marginparwidth=0pt,includemp=false
]{geometry}


\newcommand\showpage{%
\setlayoutscale{0.5}\setlabelfont{\tiny}\printheadingsfalse\printparametersfalse
\currentpage\pagedesign}

\hypersetup{pdftitle={DM doc tree }, pdfsubject={Documentaiton tree for LSST DM }, pdfauthor={ William O'Mullane}}

\input{styles}


\begin{document}

\begin{tikzpicture}[node distance=0mm]


	\node (scireq) [docbox] { LSST  Science Requirements LPM-17 (SRD)};
	\node (daicd) [docboxicd, left=11cm of scireq] { DM Data Acq ICD LSE-68 };
	\node (camicd) [docboxicd, above=0.2cm of daicd] { DM Camera ICD LSE-69 };
	\node (csicd) [docboxicd, above=0.2cm of camicd] { DM Telescope Control Sys ICD LSE-75 };
	\node (sumicd) [docboxicd, above=0.2cm of csicd] { DM Summit Infra ICD LSE-76 };
	\node (baseicd) [docboxicd, above=0.2cm of sumicd] { DM Base Infra ICD LSE-77 };
	\node (epoicd) [docboxicd, above=0.2cm of baseicd] { DM EPO ICD LSE-131 };
	\node (auxicd) [docboxicd, above=0.2cm of epoicd] { DM Telescope Aux  ICD LSE-140 };
    \node (sysreq) [docbox, right = 1cm of scireq] { LSST  System Requirements LSE-29 (LSR)};
    \node (oss) [docbox, right = 1cm of sysreq] { Observatory System Spec LSE-30 (OSS) };
%  LEGEND
	\node(legend) [below=1cm of scireq] {};
	\node(legendr) [right=1cm of legend] {};
	\draw[dline] (legend) to (legendr);
	\node(dtext) [right= 2mm of legendr] {Specification and Design};
	\node(legend2) [below=2mm of legend] {};
	\node(legend2r) [right=1cm of legend2] {};
	\draw[pline] (legend2) to (legend2r);
	\node(ptext) [right= 2mm of legend2r] {Planning};
	\node(legend3) [below=2mm of legend2] {};
	\node(legend3r) [right=1cm of legend3] {};
	\draw[tline] (legend3) to (legend3r);
	\node(ttext) [right= 2mm of legend3r] {Test and Validation};
        \node (nf) [docboxm, left=5mm of legend2] { Comming in 2018};
	\node (icd) [docboxicd, left=5mm of nf] { Interface Control Document (ICD) };
	\node (upd) [docboxu, left=5mm of icd] { Needs Update};
%%%
	\node (dmreq) [docbox, above=5mm of scireq.north] { DM System Requirements  LSE-61 (DMSR)};
	\node (svtp) [docbox, left=60mm of dmreq.west] { DM  Validation \& Test Plan LDM-503 (SVTP)};
    \node (pmp) [docbox, right=10mm of dmreq.east] { DM PMP LDM-294};
    \node (crd) [docboxm, text width=38mm,  right=5cm of pmp.east] {Config/Release/Deploy Management };
    \node (vcd) [docboxm, above=5mm of crd.north] { DM Verification Control (VCD)};

    %\node (compz) [docboxm, above=5mm of dmreq.north] { Component Z Requirements LDM-XXX};
    %\node (compx) [docboxm, left=20mm of compz] { Component X Requirements LDM-XXX};
    %\node (crdots) [right=1mm of compx.east] {\huge \ldots \ldots};
    \node (compd)  [docbox, above=5mm of dmreq.north] { Component Architecture  LDM-148};

    \node (plc)  [docbox, above=10mm of compd] {L2 Pipeline Design LDM-151};
    \node (mwc)  [docboxu, left=5mm of plc] { Midleware Design LDM-152};
    \node (qservc)  [docboxu, left=5mm of mwc] { Qserv Design LDM-135};
    \node (infrac)  [docboxu, right=5mm of plc] { Services \& Infrastructure LDM-129};
    \node (suitr) [docboxu, right=10mm of infrac.east] { SUIT Design LDM-130};
    \node (userd)  [docbox, right=4.0cm of compd] { User Documumentation };

    \node (plt) [docboxm, above=29mm of plc] { L2 Pipelines Test Spec };
    \node (qservt) [docboxu, above=29mm of qservc] { Qserv Test Spec };


    \node (suitt) [docboxm, above=29mm of suitr] { SUIT Test Spec };

    \node (pltr) [docboxm, above=5mm of plt] { L2 Pipelines Test Reports };
    \node (qservtr) [docboxm, above=5mm of qservt] { Qserv Test Reports };
    \node (suittr) [docboxm, above=5mm of suitt] { SUIT Test Reports };

   \draw[dline] (dmreq.north) to (compd.south);
   \draw[dline] (scireq.north) to (dmreq.south);
   \draw[dline] (scireq.east) to (sysreq.west);
   \draw[dline] (sysreq.east) to (oss.west);

   \node (suitrp) [below=5mm of suitr] {};
   \draw[dline] (suitrp.north) to (suitr.south);

   \node (plcp) [below=5mm of plc] {};
   \draw[dline] (plcp.north) to (plc.south);

   \node (mwcp) [below=5mm of mwc] {};
   \draw[dline] (mwcp.north) to  (mwc.south);

   \node (infracp) [below=5mm of infrac] {};
   \draw[dline] (infracp.north) -| (infrac.south);

   \node (qservcp) [below=5mm of qservc] {};
   \draw[dline] (qservcp.north) to (qservc.south);

   \draw[dlines] (plcp.north) -- (qservcp.north);
   \draw[dlines] (suitrp.north) -- (plcp.north);
   \draw[dlines] (compd.north) -- (plcp.north);


   \node (qservtp) [left=5mm of qservt] {};
   \node (qservtpb) [below=10mm of qservtp.east] {};
   \draw[dlines] (svtp.north) -| (qservtpb.west);
   \draw[dlines] (qservtpb.west) |- (qservt.west);
   %\draw[dline] (qservtp.east) -- (qservt.west);
   
   \node (pltp) [left=5mm of plt] {};
   \node (pltpb) [below=10mm of pltp.east] {};
   %\draw[dlines] (svtp.north) |- (pltpb.west);
   \draw[dline] (pltpb.west) |- (plt.west);

    \node (tst) [below=5mm of pltpb] {\color{red} Decide Components for test specs};

   \node (suittp) [left=5mm of suitt] {};
   \node (suittpb) [below=10mm of suittp.east] {};
   \draw[dlines] (qservtpb.west) -- (suittpb.west);
   \draw[dline] (suittpb.west) |-  (suitt.west);

   \draw[tline] (pltr.north) -- ++(0,0.5)  -| (vcd.north);
   \draw[tline] (suittr.north) -- ++(0,0.5)  -| (vcd.north);
   \draw[tline] (qservtr.north) -- ++(0,0.5)  -| (vcd.north);

   \draw[tline] (svtp.east) to (dmreq.west);
   \draw[tline] (plt.south) to (plc.north);
   \draw[tline] (qservt.south) to (qservc.north);
   \draw[tline] (suitt.south) to (suitr.north);
%reports
   \draw[dline] (plt.north) to (pltr.south);
   \draw[dline] (qservt.north) to (qservtr.south);
   \draw[dline] (suitt.north) to (suittr.south);

   \draw[pline] (pmp.west) -|  (dmreq.east);
   \draw[pline] (pmp.east) -- (vcd.west);
   \draw[pline] (pmp.east) -|  (crd.west);

 %icds 
   \node (daicdp) [right=0.8cm of daicd.east] {};
   \draw[dline] (daicdp.west) -- (daicd.east);

   \node (camicdp) [right=0.8cm of camicd.east] {};
   \draw[dline] (camicdp.west) -- (camicd.east);
   \node (csicdp) [right=0.8cm of csicd.east] {};
   \draw[dline] (csicdp.west) -- (csicd.east);
   \node (sumicdp) [right=0.8cm of sumicd.east] {};
   \draw[dline] (sumicdp.west) -- (sumicd.east);

   \node (baseicdp) [right=0.8cm of baseicd.east] {};
   \draw[dline] (baseicdp.west) -- (baseicd.east);

   \node (epoicdp) [right=0.8cm of epoicd.east] {};
   \draw[dline] (epoicdp.west) -- (epoicd.east);

  
   \node (auxicdp) [right=0.8cm of auxicd.east] {};
   \draw[dlines] (scireq.west) -| (auxicdp.west);
   \draw[dline] (auxicdp.west) -- (auxicd.east);

\end{tikzpicture}
\end{document}
